{"version":3,"sources":["uni-app:///main.js","webpack:///D:/www/haisiteng/uniapp_vue2/pages/shop/goods_detail/goods_detail.vue?e65e","webpack:///D:/www/haisiteng/uniapp_vue2/pages/shop/goods_detail/goods_detail.vue?bc4f","webpack:///D:/www/haisiteng/uniapp_vue2/pages/shop/goods_detail/goods_detail.vue?bcab","webpack:///D:/www/haisiteng/uniapp_vue2/pages/shop/goods_detail/goods_detail.vue?bb39","uni-app:///pages/shop/goods_detail/goods_detail.vue","webpack:///D:/www/haisiteng/uniapp_vue2/pages/shop/goods_detail/goods_detail.vue?74af","webpack:///D:/www/haisiteng/uniapp_vue2/pages/shop/goods_detail/goods_detail.vue?d563"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","loaded","detail","checkspec","showSpecFlag","Num","checkSpecArr","computed","goods_cart_number","userinfo","maxNum","onLoad","console","uni","onShareAppMessage","title","path","imageUrl","methods","showPreviewImage","current","urls","indicator","onSpecPopupChange","showSpecModal","icon","addCart","axios","goods_id","goods_spec","goods_number","goods_title","goods_cover","number","goToBuycreate","url","available_integral","goods_spec_alias","items","checkIsElective","is_elective","loadData","specs","v","t","is_seleted","gotoShopCart","onNumChange","setSpecSeleted","checkIsElectiveFromSpecArr","specArr","is","specChanged","currentSpec","checked","is_check","specitem"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqI;AACrI;AACgE;AACL;AACsC;;;AAGjG;AACkL;AAClL,gBAAgB,sLAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,mGAAM;AACR,EAAE,4GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iPAEN;AACP,KAAK;AACL;AACA,aAAa,iVAEN;AACP,KAAK;AACL;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,aAAa,gQAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjGA;AAAA;AAAA;AAAA;AAAorB,CAAgB,mqBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACsHxsB;AAIA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA,eACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC,0CACA;IACAC;MAAA;IAAA;IACAC;MAAA;IAAA;EACA;IACAC;MACA;QACA;MACA;QACA;MACA;IACA;EAAA,EACA;EACAC;IACAC;IACA;MACAC;IACA;IACA;IACA;EACA;EACA;AACA;AACA;EACAC;IACA;IACAF;IACA;MACAG;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACAN;QACAO;QACAC;QACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;MACA;MACA;QACAX;UACAE;UACAU;QACA;QACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MACAd;MACA;QACAe;UACAC;UACAC;UACAC;UACAC;UACAC;QACA;UACA;UACA;YACA;cACAC;YACA;YACApB;cACAE;cACAU;YACA;UACA;YACAZ;cACAE;cACAU;YACA;UACA;QACA;UACAb;UACAC;YACAE;YACAU;UACA;QACA;MACA;IAEA;IACAS;MAAA;MACAtB;MACA;QACA;UACA;UACAC;YACAsB,6DACAC,qBACA,UACA;UACA;QACA;UACAvB;YACAE;YACAU;UACA;QACA;MAEA;IACA;IACAY;MACA;MACAC;QACAD;MACA;MACAC;MACA;IACA;IACAC;MACA;MACA;QACA;QACA;UACAC;QACA;MACA;MACA;IACA;IACAC;MAAA;MACAd;QACAf;QACA;UACA;UACA;UAEA;UACA8B;YACA;YACAC;cACAC;gBACAC;gBACAL;cACA;YACA;UACA;UACA5B;UACAA;QACA;MACA;IACA;IACAkC;MACAjC;QACAsB;MACA;IACA;IACAY;MACAnC;IACA;IACAoC;MACA;IACA;IACAC;MACA;MAAA,2CACA;QAAA;MAAA;QAAA;UAAA;UACA;UACA;UAAA,4CACAC;YAAA;UAAA;YAAA;cAAA;cACA;gBACAC;gBACA;cACA;YACA;UAAA;YAAA;UAAA;YAAA;UAAA;UACA;YACAX;YACA;UACA;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;IACA;IACAY;MAAA;MACA;MACA;;MAEA;MACA;QACA;MACA;MACAxC;MACAyC;MAEA;QACA;MACA;QACA;MACA;MACAzC;MACA8B;QACA;UACAC;QACA;MACA;MACA;MACAD;QACA;UACAC;YACA;cACA;cACA;gBACA;kBACAO;gBACA;cACA;cACAtC;cACAgC;YACA;UACA;QACA;MACA;MACAhC;MACA8B;MACA;MACA;MAAA,4CACA;QAAA;MAAA;QAAA;UAAA;UACA;YACAY;YACA;UACA;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;QACA;UACA;UACA;YACA;YACA;cACAC;YACA;UACA;UACA;YACAC;YACA;UACA;QACA;MACA;QACA;MACA;MACA5C;MACAA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC7YA;AAAA;AAAA;AAAA;AAAmzC,CAAgB,8sCAAG,EAAC,C;;;;;;;;;;;ACAv0C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/shop/goods_detail/goods_detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/shop/goods_detail/goods_detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./goods_detail.vue?vue&type=template&id=54e10dcf&scoped=true&\"\nvar renderjs\nimport script from \"./goods_detail.vue?vue&type=script&lang=js&\"\nexport * from \"./goods_detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./goods_detail.vue?vue&type=style&index=0&id=54e10dcf&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54e10dcf\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/shop/goods_detail/goods_detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_detail.vue?vue&type=template&id=54e10dcf&scoped=true&\"","var components\ntry {\n  components = {\n    uToast: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-toast/u-toast\" */ \"@/uni_modules/uview-ui/components/u-toast/u-toast.vue\"\n      )\n    },\n    uLoadingPage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-loading-page/u-loading-page\" */ \"@/uni_modules/uview-ui/components/u-loading-page/u-loading-page.vue\"\n      )\n    },\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-icon/u-icon\" */ \"@/uni_modules/uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uBadge: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-badge/u-badge\" */ \"@/uni_modules/uview-ui/components/u-badge/u-badge.vue\"\n      )\n    },\n    uButton: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-button/u-button\" */ \"@/uni_modules/uview-ui/components/u-button/u-button.vue\"\n      )\n    },\n    uniPopup: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-popup/components/uni-popup/uni-popup\" */ \"@/uni_modules/uni-popup/components/uni-popup/uni-popup.vue\"\n      )\n    },\n    uImage: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-image/u-image\" */ \"@/uni_modules/uview-ui/components/u-image/u-image.vue\"\n      )\n    },\n    uNumberBox: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-number-box/u-number-box\" */ \"@/uni_modules/uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var a0 = {\n    \"border-radius\": \"999px 0 0 999px\",\n  }\n  var a1 = {\n    \"border-radius\": \"0 999px 999px 0\",\n  }\n  var g0 = _vm.detail.specs && _vm.detail.specs.length > 0\n  var g1 = g0 ? _vm.detail.specs.length : null\n  var l0 = _vm.__map(_vm.detail.specs, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var g2 =\n      (_vm.detail.specs && _vm.detail.specs.length > 0) || item.list.length > 1\n    return {\n      $orig: $orig,\n      g2: g2,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        a0: a0,\n        a1: a1,\n        g0: g0,\n        g1: g1,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_detail.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"bg-white\">\r\n\t\t<u-toast ref=\"uToast\"></u-toast>\r\n\t\t<u-loading-page :loading=\"!loaded\" loading-text=\"My Hastens\" loading-mode=\"semicircle\"></u-loading-page>\r\n\t\t<view v-show=\"loaded\">\r\n\t\t\t<!-- 轮播图 -->\r\n\t\t\t<swiper class=\"screen-swiper square-dot\" indicator-dots circular :autoplay=\"detail.video == ''\"\r\n\t\t\t\tinterval=\"5000\" duration=\"500\" indicator-color=\"#6b7280\" indicator-active-color=\"#374151\">\r\n\t\t\t\t<swiper-item v-if=\"detail.video != ''\">\r\n\t\t\t\t\t<video style=\"width: 100%;\" :src=\"detail.video\" autoplay loop muted :show-play-btn=\"false\"\r\n\t\t\t\t\t\t:controls=\"false\" object-fit=\"cover\"></video>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t\t<swiper-item v-for=\"(item, index) in detail.slider\" :key=\"item\">\r\n\t\t\t\t\t<view @click=\"showPreviewImage(index)\">\r\n\t\t\t\t\t\t<image style=\"width: 100%;\" :src=\"item\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t<view class=\"bg-white padding-sm\">\r\n\t\t\t\t<view class=\"\">{{detail.name}}</view>\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<text class=\"text-xs\">¥</text><text\r\n\t\t\t\t\t\tclass=\"text-xl text-bold\">{{ checkspec.price_selling ? checkspec.price_selling:detail.price_selling }}</text>\r\n\t\t\t\t\t<text class=\"text-sm\" v-show=\"!checkspec.id\">起</text>\r\n\t\t\t\t\t<text style=\"margin-left: 4rpx;\"\r\n\t\t\t\t\t\tv-show=\"(checkspec.id && checkspec.integral_num > 0) || detail.integral_num > 0\">+{{checkspec.integral_num ? checkspec.integral_num : detail.integral_num}}积分</text>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- <view class=\"\">{{checkspec.goods_spec_alias}}</view> -->\r\n\t\t\t\t<view class=\"text-sm text-desc\">{{detail.remark}}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"margin-top-sm\" style=\"padding-bottom: 160rpx;\">\r\n\t\t\t\t<rich-text style=\"font-size: 0;\" :nodes=\"detail.content\"></rich-text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"bg-white flex align-center\"\r\n\t\t\tstyle=\"position: fixed;bottom: 0;width: 100%;padding-bottom: env(safe-area-inset-bottom);z-index: 10080;\">\r\n\t\t\t<view style=\"position: relative;width: 100rpx;padding: 10rpx 0;\">\r\n\t\t\t\t<button class=\"u-reset-button custom-button\" open-type=\"contact\" hover-class=\"bg-gray\">\r\n\t\t\t\t\t<u-icon name=\"chat\" size=\"52rpx\" label=\"客服\" labelPos=\"bottom\" labelSize=\"20rpx\" space=\"0\"></u-icon>\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"position: relative;width: 100rpx;padding: 10rpx 0;\">\r\n\t\t\t\t<button @click=\"gotoShopCart\" class=\"u-reset-button custom-button\" hover-class=\"bg-gray\"><u-icon\r\n\t\t\t\t\t\tname=\"shopping-cart\" size=\"52rpx\" label=\"购物车\" labelPos=\"bottom\" labelSize=\"20rpx\"\r\n\t\t\t\t\t\tspace=\"0\"></u-icon></button>\r\n\t\t\t\t<u-badge numberType=\"ellipsis\" :max=\"99\" bgColor=\"#ff0000\" type=\"error\" :value=\"goods_cart_number\"\r\n\t\t\t\t\t:offset=\"[0,2]\" absolute></u-badge>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"flex: 1;padding: 10rpx;\">\r\n\t\t\t\t<view style=\"border: none;display: inline-block;width: 50%;\">\r\n\t\t\t\t\t<u-button type=\"primary\" text=\"加入购物车\" color=\"#0B1839\"\r\n\t\t\t\t\t\t:custom-style=\"{'border-radius':'999px 0 0 999px'}\" :data-index=\"1\"\r\n\t\t\t\t\t\t@click.native=\"showSpecModal\"></u-button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view style=\"border: none;display: inline-block;width: 50%;\">\r\n\t\t\t\t\t<u-button type=\"primary\" text=\"立即购买\" color=\"#000\"\r\n\t\t\t\t\t\t:custom-style=\"{'border-radius':'0 999px 999px 0'}\" :data-index=\"2\"\r\n\t\t\t\t\t\t@click.native=\"showSpecModal\"></u-button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\t\t<uni-popup ref=\"spec_popup\" type=\"bottom\" @change=\"onSpecPopupChange\">\r\n\t\t\t<!-- 选择规格 -->\r\n\t\t\t<view class=\"spec-box bg-white\"\r\n\t\t\t\tstyle=\"padding: 30rpx 30rpx 120rpx 30rpx;margin-bottom: env(safe-area-inset-bottom);\">\r\n\t\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t\t<u-image :src=\"detail.cover\" height=\"224rpx\" width=\"224rpx\" />\r\n\t\t\t\t\t<view class=\"flex padding-right-xl margin-left-sm flex-direction justify-end\"\r\n\t\t\t\t\t\tstyle=\"height: 224rpx;\">\r\n\t\t\t\t\t\t<view style=\"margin-bottom: auto;\">{{detail.name}}</view>\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<text>¥</text>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-lg\">{{ checkspec.price_selling ? checkspec.price_selling:detail.price_selling }}</text>\r\n\t\t\t\t\t\t\t<text class=\"text-sm\" v-show=\"!checkspec.id\">起</text>\r\n\t\t\t\t\t\t\t<text style=\"margin-left: 4rpx;\"\r\n\t\t\t\t\t\t\t\tv-show=\"(checkspec.id && checkspec.integral_num > 0) || detail.integral_num > 0\">+{{checkspec.integral_num ? checkspec.integral_num : detail.integral_num}}积分</text>\r\n\t\t\t\t\t\t\t<text class=\"text-sm\" style=\"margin-left: 6rpx;\"> / 件</text>\r\n\r\n\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"text-sm text-desc\">剩余{{checkspec.id ? (checkspec.stock_total - checkspec.stock_sales) : (detail.stock_total-detail.stock_sales)}}件</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-for=\"(item, index) in detail.specs\" :key=\"item.spec\" style=\"margin-top: 8rpx;\">\r\n\t\t\t\t\t<view class=\"text-lg\" v-if=\"detail.specs && detail.specs.length > 0\">\r\n\t\t\t\t\t\t{{detail.specs.length == 1 ? '选择规格': item.name}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex flex-wrap\"\r\n\t\t\t\t\t\tv-if=\"(detail.specs && detail.specs.length > 0) || item.list.length > 1\"\r\n\t\t\t\t\t\tstyle=\"margin-top: 8rpx;\">\r\n\t\t\t\t\t\t<view class=\"spec_item text-df\"\r\n\t\t\t\t\t\t\t:class=\"{active: value.is_seleted === true, 'disabled': value.is_seleted !== true && value.is_elective === false}\"\r\n\t\t\t\t\t\t\t:data-key1=\"index\" :data-key2=\"key\" @click='setSpecSeleted' v-for=\"(value,key) in item.list\"\r\n\t\t\t\t\t\t\t:key=\"value.spec_item\" v-show=\"value.show\">\r\n\t\t\t\t\t\t\t{{value.name}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex align-center margin-tb-sm justify-between\">\r\n\t\t\t\t\t<view class=\"text-lg\">数量</view>\r\n\t\t\t\t\t<view @click.stop>\r\n\t\t\t\t\t\t<u-number-box v-model=\"Num\" @change=\"onNumChange\" :min=\"1\" :max=\"maxNum\" integer\r\n\t\t\t\t\t\t\t:button-size=\"24\"></u-number-box>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapGetters\r\n\t} from 'vuex'\r\n\timport {\r\n\t\taxios,\r\n\t\tcheckLogin\r\n\t} from '@/utils/request'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tloaded: false,\r\n\t\t\t\tdetail: {},\r\n\t\t\t\tcheckspec: {},\r\n\t\t\t\tshowSpecFlag: false,\r\n\t\t\t\tNum: 1,\r\n\t\t\t\tcheckSpecArr: [],\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tgoods_cart_number: state => state.goods_cart.goods_cart_number,\r\n\t\t\t\tuserinfo: state => state.user.userinfo\r\n\t\t\t}),\r\n\t\t\tmaxNum() {\r\n\t\t\t\tif (this.checkspec.id) {\r\n\t\t\t\t\treturn this.checkspec.stock_total - this.checkspec.stock_sales\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 1\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tconsole.log(options)\r\n\t\t\tif (options.uid) {\r\n\t\t\t\tuni.setStorageSync('pid', options.uid)\r\n\t\t\t}\r\n\t\t\tthis.aid = options.id\r\n\t\t\tthis.loadData(options.id)\r\n\t\t},\r\n\t\t/**\r\n\t\t * 用户点击右上角分享\r\n\t\t */\r\n\t\tonShareAppMessage(res) {\r\n\t\t\tconst url = 'pages/shop/goods_detail/goods_detail?id=' + this.aid + '&uid=' + this.userinfo.id\r\n\t\t\tconsole.log(url)\r\n\t\t\treturn {\r\n\t\t\t\ttitle: this.detail.name,\r\n\t\t\t\tpath: url,\r\n\t\t\t\timageUrl: this.detail.cover\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tshowPreviewImage(index){\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent: index,\r\n\t\t\t\t\turls: this.detail.slider,\r\n\t\t\t\t\tindicator: 'number'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonSpecPopupChange(e) {\r\n\t\t\t\tthis.showSpecFlag = e.show\r\n\t\t\t},\r\n\t\t\tshowSpecModal(e) {\r\n\t\t\t\tlet index = e.currentTarget.dataset.index\r\n\t\t\t\tif (this.showSpecFlag === false) {\r\n\t\t\t\t\tthis.$refs.spec_popup.open()\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tif(!this.checkspec.id){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择商品规格',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif (index == 1) {\r\n\t\t\t\t\t//加入购物车\r\n\t\t\t\t\tthis.addCart()\r\n\t\t\t\t} else if (index == 2) {\r\n\t\t\t\t\t//立即购买\r\n\t\t\t\t\tthis.goToBuycreate()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddCart() {\r\n\t\t\t\tconsole.log('加入购物车')\r\n\t\t\t\tcheckLogin(() => {\r\n\t\t\t\t\taxios.post(\"/api/v1/user/goods/cart/add\", {\r\n\t\t\t\t\t\tgoods_id: this.aid,\r\n\t\t\t\t\t\tgoods_spec: this.checkspec.goods_spec,\r\n\t\t\t\t\t\tgoods_number: this.Num,\r\n\t\t\t\t\t\tgoods_title: this.detail.name,\r\n\t\t\t\t\t\tgoods_cover: this.detail.cover\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tthis.$refs.spec_popup.close()\r\n\t\t\t\t\t\tif (res.code === 1) {\r\n\t\t\t\t\t\t\tthis.$store.commit('goods_cart/update_goods_cart_number', {\r\n\t\t\t\t\t\t\t\tnumber: res.data\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: res.info,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '操作失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(error => {\r\n\t\t\t\t\t\tconsole.log(error)\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '操作失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\tgoToBuycreate() {\r\n\t\t\t\tconsole.log('直接购买')\r\n\t\t\t\tcheckLogin(() => {\r\n\t\t\t\t\tif (this.checkspec.stock_total > this.checkspec.stock_sales) {\r\n\t\t\t\t\t\tlet available_integral = this.detail.available_integral ? 1 : 0\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pages/my/confirm_order/confirm_order?use_integral=' +\r\n\t\t\t\t\t\t\t\tavailable_integral +\r\n\t\t\t\t\t\t\t\t'&key=' +\r\n\t\t\t\t\t\t\t\tthis.aid + '@' + this.checkspec.goods_spec + '@' + this.Num\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '库存不足',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoods_spec_alias(items) {\r\n\t\t\t\tlet goods_spec_alias = [];\r\n\t\t\t\titems.goods_spec.split(\";;\").map(item => {\r\n\t\t\t\t\tgoods_spec_alias.push(item.split(\"::\")[1])\r\n\t\t\t\t})\r\n\t\t\t\titems.goods_spec_alias = goods_spec_alias.join(\" \")\r\n\t\t\t\treturn items\r\n\t\t\t},\r\n\t\t\tcheckIsElective(goods_spec){\r\n\t\t\t\tlet is_elective = false\r\n\t\t\t\tthis.detail.items.forEach((v,vk) => {\r\n\t\t\t\t\tlet onchecck = ';;' + v.goods_spec + ';;'\r\n\t\t\t\t\tif (onchecck.indexOf(';;' + goods_spec+ ';;') > -1 && v.stock_total > v.stock_sales){\r\n\t\t\t\t\t\tis_elective = true\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn is_elective\r\n\t\t\t},\r\n\t\t\tloadData(id) {\r\n\t\t\t\taxios.get('/api/v1/goods/' + id).then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif (res.code === 1) {\r\n\t\t\t\t\t\tthis.loaded = true\r\n\t\t\t\t\t\tthis.detail = res.data\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst specs = [...res.data.specs]\r\n\t\t\t\t\t\tspecs.forEach((v, vk) => {\r\n\t\t\t\t\t\t\tthis.checkSpecArr[vk]=\"\"\r\n\t\t\t\t\t\t\tv.list.forEach((t, tk) => {\r\n\t\t\t\t\t\t\t\tt = Object.assign(t, {\r\n\t\t\t\t\t\t\t\t\tis_seleted: false,\r\n\t\t\t\t\t\t\t\t\tis_elective: this.checkIsElective(v.name + '::' + t.name)\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconsole.log(specs)\r\n\t\t\t\t\t\tconsole.log(this.checkSpecArr)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgotoShopCart() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/shop_cart/shop_cart'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonNumChange(event) {\r\n\t\t\t\tconsole.log('当前值为: ' + event.value)\r\n\t\t\t},\r\n\t\t\tsetSpecSeleted(e) {\r\n\t\t\t\tthis.specChanged(e.currentTarget.dataset.key1, e.currentTarget.dataset.key2)\r\n\t\t\t},\r\n\t\t\tcheckIsElectiveFromSpecArr(specArr){\r\n\t\t\t\tlet is_elective = false\r\n\t\t\t\tfor(let v of this.detail.items){\r\n\t\t\t\t\tlet onchecck = ';;' + v.goods_spec + ';;'\r\n\t\t\t\t\tlet is = true\r\n\t\t\t\t\tfor(let t of specArr){\r\n\t\t\t\t\t\tif(onchecck.indexOf(t) === -1){\r\n\t\t\t\t\t\t\tis = false\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(is !== false && v.stock_total > v.stock_sales){\r\n\t\t\t\t\t\tis_elective = true\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn is_elective\r\n\t\t\t},\r\n\t\t\tspecChanged(i, j) {\r\n\t\t\t\tlet specs = this.detail.specs\r\n\t\t\t\tlet currentSpec = specs[i].list[j];\r\n\t\t\t\t\r\n\t\t\t\t//如果点击项不可点击 则打断不往下执行\r\n\t\t\t\tif (currentSpec.is_elective === false) {\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(currentSpec)\r\n\t\t\t\tcurrentSpec.is_seleted = !currentSpec.is_seleted\r\n\t\t\t\t\r\n\t\t\t\tif(currentSpec.is_seleted === true) {\r\n\t\t\t\t\tthis.checkSpecArr[i] = currentSpec.group + '::'+currentSpec.name\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.checkSpecArr[i] = ''\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(this.checkSpecArr)\r\n\t\t\t\tspecs[i].list.forEach((v,vk) => {\r\n\t\t\t\t\tif(vk !== j){\r\n\t\t\t\t\t\tv.is_seleted = false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// 处理其他规格的是否可点击状态\r\n\t\t\t\tspecs.forEach((v,vk) => {\r\n\t\t\t\t\tif(vk !== i || currentSpec.is_seleted === false){\r\n\t\t\t\t\t\tv.list.forEach((t,tk) => {\r\n\t\t\t\t\t\t\tif(t.is_seleted === false){\r\n\t\t\t\t\t\t\t\tlet specArr = [\";;\"+t.group+\"::\"+t.name+\";;\"]\t\r\n\t\t\t\t\t\t\t\tthis.checkSpecArr.forEach((c,ck) => {\r\n\t\t\t\t\t\t\t\t\tif(c !== \"\" && ck !== vk){\r\n\t\t\t\t\t\t\t\t\t\tspecArr.push(\";;\"+c+\";;\")\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tconsole.log('specArr',specArr)\r\n\t\t\t\t\t\t\t\tt.is_elective = this.checkIsElectiveFromSpecArr(specArr)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(specs)\r\n\t\t\t\tspecs[i].list[j] = currentSpec\r\n\t\t\t\tthis.detail.specs = [...specs]\r\n\t\t\t\tlet checked = true\r\n\t\t\t\tfor(let v of this.checkSpecArr){\r\n\t\t\t\t\tif(v === ''){\r\n\t\t\t\t\t\tchecked = false\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(checked){\r\n\t\t\t\t\tthis.detail.items.forEach((specitem, specindex) => {\r\n\t\t\t\t\t\tlet is_check = true\r\n\t\t\t\t\t\tthis.checkSpecArr.forEach((checkitem, checkindex) => {\r\n\t\t\t\t\t\t\tlet onchecck = ';;' + specitem.goods_spec + ';;'\r\n\t\t\t\t\t\t\tif (onchecck.indexOf(';;' + checkitem + ';;') === -1) {\r\n\t\t\t\t\t\t\t\tis_check = false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tif (is_check === true) {\r\n\t\t\t\t\t\t\tspecitem = this.goods_spec_alias(specitem)\r\n\t\t\t\t\t\t\tthis.checkspec = specitem\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.checkspec = {}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(this.detail)\r\n\t\t\t\tconsole.log(this.checkspec)\r\n\t\t\t\tthis.Num = 1\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.screen-swiper {\r\n\t\tmin-height: 735rpx;\r\n\t}\r\n\r\n\t.spec_item {\r\n\t\t// border: 1px solid #000;\r\n\t\tpadding: 6rpx 30rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tmin-width: 120rpx;\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 10rpx;\r\n\t\tbackground-color: #F6F6F6;\r\n\t}\r\n\r\n\t.spec_item.active {\r\n\t\tbackground-color: #0B1839;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.spec_item.disabled {\r\n\t\tcolor: #BEBEBE;\r\n\t\t// background-color: #e8e8e8;\r\n\t\t// opacity: .5;\r\n\t\ttext-decoration: line-through;\r\n\t}\r\n\r\n\t.custom-button {\r\n\t\tbackground-color: transparent;\r\n\t\t/* 移除背景颜色 */\r\n\t\tborder: none;\r\n\t\t/* 移除边框 */\r\n\t\tbox-shadow: none;\r\n\t\t/* 移除阴影 */\r\n\t\tcolor: inherit;\r\n\t\t/* 文字颜色继承父元素 */\r\n\t\t/* 其他需要重置的样式 */\r\n\t\tpadding: 0;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.custom-button::after {\r\n\t\tborder: none;\r\n\t}\r\n</style>","import mod from \"-!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_detail.vue?vue&type=style&index=0&id=54e10dcf&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../softwore/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods_detail.vue?vue&type=style&index=0&id=54e10dcf&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1717667223430\n      var cssReload = require(\"D:/softwore/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}