<view><u-loading-page vue-id="f101727e-1" loading="{{!loaded}}" loading-text="My Hastens" loading-mode="semicircle" bind:__l="__l"></u-loading-page><block wx:if="{{loaded}}"><view><block wx:if="{{address_current_id>0}}"><view data-event-opts="{{[['tap',[['$globalJump2View',['/pages/my/address/address?change=1',true]]]]]}}" class="margin-top-sm container padding-tb-sm padding-lr bg-white margin-bottom-sm flex align-center" style="border-radius:12rpx;" bindtap="__e"><view style="flex:1;"><view class="flex align-center"><block wx:if="{{address_current.is_default==1}}"><uni-tag vue-id="f101727e-2" text="默认" size="mini" custom-style="background-color: #f43f5e; border-color: #f43f5e; color: #fff;margin-right: 6rpx;" bind:__l="__l"></uni-tag></block><view class="text-sm">{{''+address_current.province+(address_current.city!='县'&&address_current.city!='市'?address_current.city:'')+address_current.area+''}}</view></view><view class="text-bold" style="margin:6rpx 0;">{{address_current.address}}</view><view class="flex align-center justify-start"><text>{{address_current.name}}</text><view><u--text vue-id="f101727e-3" mode="phone" text="{{address_current.phone}}" format="encrypt" size="28rpx" margin="0 0 0 6rpx" bind:__l="__l"></u--text></view></view></view><view style="margin-left:auto;"><u-icon vue-id="f101727e-4" name="arrow-right" color="#808080" size="28rpx" bind:__l="__l"></u-icon></view></view></block><block wx:else><view data-event-opts="{{[['tap',[['$globalJump2View',['/pages/my/address/address?change=1',true]]]]]}}" class="margin-top-sm container padding-tb-sm padding-lr bg-white margin-bottom-sm flex align-center" style="border-radius:12rpx;" bindtap="__e"><view style="flex:1;"><view class="text-bold">您还未添加收货地址，立即添加</view></view><view style="margin-left:auto;"><u-icon vue-id="f101727e-5" name="arrow-right" color="#b2b2b2" size="28rpx" bind:__l="__l"></u-icon></view></view></block><view class="bg-white container padding margin-bottom-sm" style="border-radius:12rpx;"><block wx:for="{{goods_list}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="flex"><image style="width:200rpx;height:200rpx;border-radius:20rpx;" mode="aspectFill" src="{{item.goods_cover}}"></image><view class="margin-left" style="width:470rpx;"><view class="text-lg">{{item.goods_name}}</view><view class="text-desc text-sm">{{item.goods_spec_alias}}</view><view class="margin-top"><text class="text-xs">￥<text class="text-lg">{{item.price_selling}}</text></text><text style="margin-left:6rpx;">{{'x '+item.stock_sales}}</text></view></view></view></block></view><view class="bg-white container padding-xs margin-bottom-sm" style="border-radius:12rpx;"><u-cell-group vue-id="f101727e-6" border="{{false}}" bind:__l="__l" vue-slots="{{['default']}}"><u-cell vue-id="{{('f101727e-7')+','+('f101727e-6')}}" title="商品总额" border="{{false}}" value="{{'￥'+total.amount_goods}}" bind:__l="__l"></u-cell><u-cell vue-id="{{('f101727e-8')+','+('f101727e-6')}}" border="{{false}}" title="运费" value="{{'￥'+total.express_amount}}" bind:__l="__l"></u-cell><u-cell vue-id="{{('f101727e-9')+','+('f101727e-6')}}" border="{{false}}" title="优惠券" bind:__l="__l" vue-slots="{{['value','right-icon']}}"><view slot="value"><block wx:if="{{coupon.used.id}}"><view class="text-df" style="line-height:24px;"><text>{{"「"+coupon.used.label+"」 -￥"+total.discount_amount}}</text></view></block><block wx:else><view data-event-opts="{{[['tap',[['openCouponPopup',['$event']]]]]}}" class="text-df" style="line-height:24px;" catchtap="__e"><block wx:if="{{$root.g0>0}}"><text class="text-red">{{$root.g1+"个可用"}}</text></block><block wx:else><text class="text-gray">无可用</text></block></view></block></view><view slot="right-icon"><block wx:if="{{coupon.used.id}}"><view data-event-opts="{{[['tap',[['onNotUseCoupon',['$event']]]]]}}" class="text-df" catchtap="__e"><u-icon vue-id="{{('f101727e-10')+','+('f101727e-9')}}" name="close-circle" bind:__l="__l"></u-icon></view></block><block wx:else><view data-event-opts="{{[['tap',[['openCouponPopup',['$event']]]]]}}" class="text-df" catchtap="__e"><u-icon vue-id="{{('f101727e-11')+','+('f101727e-9')}}" name="arrow-right" bind:__l="__l"></u-icon></view></block></view></u-cell><block wx:if="{{use_available&&integral_available>0}}"><u-cell vue-id="{{('f101727e-12')+','+('f101727e-6')}}" border="{{false}}" center="{{true}}" bind:__l="__l" vue-slots="{{['title','right-icon','value','label']}}"><view class="u-slot-title" slot="title"><text class="u-cell-text">积分抵扣</text></view><u-switch vue-id="{{('f101727e-13')+','+('f101727e-12')}}" slot="right-icon" size="18" activeColor="#0B1839" value="{{switchChecked}}" data-event-opts="{{[['^change',[['onSwitchChange']]],['^input',[['__set_model',['','switchChecked','$event',[]]]]]]}}" bind:change="__e" bind:input="__e" bind:__l="__l"></u-switch><view class="text-df" style="color:#606266;line-height:48rpx;" slot="value">{{'-￥'+total.amount_integral}}</view><view class="text-xs" style="color:#808080;" slot="label">{{''+integral_available+"积分可用"+(total.integral_num>0?'(-'+total.integral_num+'积分)':'')+''}}</view></u-cell></block><view style="text-align:right;padding:20rpx 30rpx;">合计：<text class="text-red">{{"￥"+total.amount_real}}</text></view></u-cell-group></view><view class="bg-white" style="position:fixed;width:100%;left:0;bottom:0;padding-bottom:env(safe-area-inset-bottom);z-index:9;"><view class="flex align-center justify-center" style="padding:0 32rpx;"><view class="flex justify-end" style="flex:1;text-align:right;"><view class="text-red">￥<text class="text-xl text-bold">{{total_order_amount}}</text>{{"."+total_order_amount_ceil+''}}</view></view><view style="padding:10rpx;"><view style="border:none;display:inline-block;"><u-button style="width:160rpx;border-radius:999px;" vue-id="f101727e-14" disabled="{{address_current_id===0}}" type="primary" text="付款" color="#000" custom-style="{{$root.a0}}" data-event-opts="{{[['tap',[['pay',['$event']]]]]}}" bindtap="__e" bind:__l="__l"></u-button></view></view></view></view></view></block><uni-popup class="vue-ref" vue-id="f101727e-15" type="bottom" background-color="#f8f8f8" data-ref="coupon_ref" bind:__l="__l" vue-slots="{{['default']}}"><view><view class="padding"><uni-segmented-control vue-id="{{('f101727e-16')+','+('f101727e-15')}}" current="{{current}}" values="{{couponTabsLabel}}" styleType="button" activeColor="#000030" data-event-opts="{{[['^clickItem',[['onClickItem']]]]}}" bind:clickItem="__e" bind:__l="__l"></uni-segmented-control></view><scroll-view style="height:700rpx;" scroll-y="{{true}}"><view class="padding-lr padding-bottom"><view><view hidden="{{!(current===0)}}"><uni-collapse bind:input="__e" style="background-color:transparent;" vue-id="{{('f101727e-17')+','+('f101727e-15')}}" value="{{coupon_available_opens}}" data-event-opts="{{[['^input',[['__set_model',['','coupon_available_opens','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{coupon.available}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="container bg-white padding-lr padding-tb-sm margin-tp" style="border-radius:12rpx;"><view class="margin-tb-sm"><view class="flex justify-between align-center text-lg"><text>{{item.title}}</text><text class="text-red">{{"可折扣￥"+item.discount_amount}}</text></view><view class="flex justify-between align-center margin-tb-xs"><text>{{"有效期至"+item.end_time_format}}</text><text class="text-red">{{item.label}}</text></view></view><u-line vue-id="{{('f101727e-18-'+index)+','+('f101727e-17')}}" dashed="{{true}}" bind:__l="__l"></u-line><uni-collapse-item vue-id="{{('f101727e-19-'+index)+','+('f101727e-17')}}" name="{{'available_'+index}}" titleBorder="none" border="{{false}}" show-arrow="{{false}}" bind:__l="__l" vue-slots="{{['default','title']}}"><view class="flex justify-between align-center margin-top-xs" slot="title"><view class="flex align-center"><text class="text-xs">使用规则</text><view class="margin-left-xs"><u-icon vue-id="{{('f101727e-20-'+index)+','+('f101727e-19-'+index)}}" name="arrow-down-fill" size="10rpx" bind:__l="__l"></u-icon></view></view><view><u-button vue-id="{{('f101727e-21-'+index)+','+('f101727e-19-'+index)}}" type="primary" shape="circle" plain="{{true}}" text="立即使用" size="mini" data-event-opts="{{[['tap',[['onCouponUse',['$0'],[[['coupon.available','id',item.id,'id']]]]]]]}}" catchtap="__e" bind:__l="__l"></u-button></view></view><view class="text-xs">{{item.remark}}</view></uni-collapse-item></view></block></uni-collapse><block wx:if="{{$root.g2===0}}"><u-empty vue-id="{{('f101727e-22')+','+('f101727e-15')}}" marginTop="44" text="暂无可用优惠券" icon="/static/empty_data.png" bind:__l="__l"></u-empty></block></view><view hidden="{{!(current===1)}}"><uni-collapse bind:input="__e" style="background-color:transparent;" vue-id="{{('f101727e-23')+','+('f101727e-15')}}" value="{{coupon_unavailable_opens}}" data-event-opts="{{[['^input',[['__set_model',['','coupon_unavailable_opens','$event',[]]]]]]}}" bind:__l="__l" vue-slots="{{['default']}}"><block wx:for="{{coupon.unavailable}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="container bg-white padding-lr padding-tb-sm margin-tp" style="border-radius:12rpx;"><view class="margin-tb-sm"><view class="flex justify-between align-center text-lg"><text>{{item.title}}</text><text class="text-gray">暂不可用</text></view><view class="flex justify-between align-center margin-tb-xs"><text>{{"有效期至"+item.end_time_format}}</text><text class="text-red">{{item.label}}</text></view></view><u-line vue-id="{{('f101727e-24-'+index)+','+('f101727e-23')}}" dashed="{{true}}" bind:__l="__l"></u-line><uni-collapse-item vue-id="{{('f101727e-25-'+index)+','+('f101727e-23')}}" name="{{'unavailable_'+index}}" titleBorder="none" border="{{false}}" show-arrow="{{false}}" bind:__l="__l" vue-slots="{{['default','title']}}"><view class="flex justify-between align-center margin-top-xs" slot="title"><view class="flex align-center"><text class="text-xs">使用规则</text><view class="margin-left-xs"><u-icon vue-id="{{('f101727e-26-'+index)+','+('f101727e-25-'+index)}}" name="arrow-down-fill" size="10rpx" bind:__l="__l"></u-icon></view></view></view><view class="text-xs">{{item.remark}}</view></uni-collapse-item></view></block></uni-collapse><block wx:if="{{$root.g3===0}}"><u-empty vue-id="{{('f101727e-27')+','+('f101727e-15')}}" marginTop="44" text="暂无不可用优惠券" icon="/static/empty_data.png" bind:__l="__l"></u-empty></block></view></view></view></scroll-view></view></uni-popup></view>