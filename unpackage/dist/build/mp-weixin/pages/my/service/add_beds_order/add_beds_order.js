(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/service/add_beds_order/add_beds_order"],{"0088":function(e,n,t){"use strict";t.r(n);var r=t("a4cb"),i=t.n(r);for(var s in r)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(s);n["default"]=i.a},1554:function(e,n,t){"use strict";t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return s})),t.d(n,"a",(function(){return r}));var r={uLoadingPage:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-loading-page/u-loading-page")]).then(t.bind(null,"8282"))},uLine:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-line/u-line")]).then(t.bind(null,"4bfd"))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,"4a55"))},uButton:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-button/u-button")]).then(t.bind(null,"4005"))}},i=function(){var e=this.$createElement,n=(this._self._c,this.loaded?this.multiIds.length:null);this.$mp.data=Object.assign({},{$root:{g0:n}})},s=[]},2651:function(e,n,t){"use strict";t.r(n);var r=t("1554"),i=t("0088");for(var s in i)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(s);t("ad01");var o=t("f0c5"),u=Object(o["a"])(i["default"],r["b"],r["c"],!1,null,"de5b3538",null,!1,r["a"],void 0);n["default"]=u.exports},"334d":function(e,n,t){"use strict";(function(e,n){var r=t("4ea4");t("be30");r(t("66fd"));var i=r(t("2651"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(i.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},a4cb:function(e,n,t){"use strict";(function(e){var r=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(t("2eee")),s=r(t("c973")),o=r(t("448a")),u=r(t("9523")),a=t("26cb"),d=t("db75");function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){(0,u.default)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var m={data:function(){return{name:"",phone:"",address:"",region:[],loaded:!1,items:[],multiIndex:[0,0,0],multiIds:[],newArr:[[],[],[]]}},computed:l({},(0,a.mapState)({current_beds:function(e){return e.admin_beds.current_beds},current_address:function(e){return e.store_user_address.address_current}})),onLoad:function(){var e=this;(0,d.checkLogin)((function(){e.loadData()}))},onShow:function(){this.loaded&&(console.log("刷新地址信息"),this.showCurrentAddress())},methods:{bindMutilPickerChange:function(e){var n=this;console.log(e),console.log(this.multiIndex);this.items.map((function(e,t){n.multiIndex[0]===t&&(n.multiIds[0]=l({},e),e.subs.map((function(e,t){n.multiIndex[1]===t&&(n.multiIds[1]=l({},e),e.subs.map((function(e,t){n.multiIndex[2]===t&&(n.multiIds[2]=l({},e))})))})))})),console.log(this.multiIds),this.$forceUpdate()},bindMutilPickerColumnChange:function(e){var n=this,t={newArr:this.newArr,multiIndex:this.multiIndex};t.multiIndex[e.detail.column]=e.detail.value;var r=function(){var e=[],r=[];n.items.map((function(n,i){t.multiIndex[0]===i&&n.subs.map((function(n,i){e.push(n.name),t.multiIndex[1]===i&&n.subs.map((function(e,n){r.push(e.name)}))}))})),t.newArr[1]=e,t.newArr[2]=r};switch(e.detail.column){case 0:t.multiIndex[1]=0,t.multiIndex[2]=0,r();break;case 1:t.multiIndex[2]=0,r();break;case 2:r();break}this.newArr=t.newArr,this.multiIndex=(0,o.default)(t.multiIndex),this.$forceUpdate()},buildRegions:function(e){this.items=e;var n={arr:[],arr1:[],arr2:[],arr3:[]};e.map((function(e,t){n.arr1.push(e.name),n.arr2.length<=0&&e.subs.map((function(e,t){n.arr2.push(e.name),n.arr3.length<=0&&e.subs.map((function(e,t){n.arr3.push(e.name)}))}))})),n.arr[0]=n.arr1,n.arr[1]=n.arr2,n.arr[2]=n.arr3,this.newArr=n.arr,console.log(this.newArr),console.log(this.multiIndex)},showCurrentAddress:function(){var e=this;if(console.log("onShow的地址处理"),console.log(this.current_address),console.log(this.current_address.id),this.current_address.id){console.log("地址更新"),this.name=this.current_address.name,this.phone=this.current_address.phone,this.address=this.current_address.address,this.multiIndex=[0,0,0],this.multiIds=[];var n={multiIndex:(0,o.default)(this.multiIndex),multiIds:(0,o.default)(this.multiIds),arr2:[],arr3:[]};this.items.map((function(t,r){t.name===e.current_address.province&&(n.multiIndex[0]=r,n.multiIds[0]=l({},t),t.subs.map((function(t,r){n.arr2.push(t.name),t.name===e.current_address.city&&(n.multiIndex[1]=r,n.multiIds[1]=l({},t),t.subs.map((function(t,r){n.arr3.push(t.name),t.name===e.current_address.area&&(n.multiIndex[2]=r,n.multiIds[2]=l({},t))})))})))})),console.log(n),3===n.multiIds.length&&(this.multiIndex=n.multiIndex,this.multiIds=n.multiIds,this.newArr[1]=n.arr2,this.newArr[2]=n.arr3,this.$forceUpdate())}else console.log("重置"),this.name="",this.phone="",this.address="",this.buildRegions(this.items),this.$forceUpdate()},loadData:function(){var e=this;return(0,s.default)(i.default.mark((function n(){var t;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.axios.get("/api/v1/goods/region");case 3:if(t=n.sent,1===t.code){n.next=6;break}throw new Error("城市数据获取失败");case 6:e.buildRegions(t.data),e.showCurrentAddress(),e.loaded=!0,n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))()},submit:function(){var n=this;if(""==this.name)return e.showToast({title:"请输入用户姓名",icon:"none",duration:1200}),!1;if(""==this.phone)return e.showToast({title:"请输入用户电话",icon:"none",duration:1200}),!1;if(this.multiIds.length<3)return e.showToast({title:"请选择地区",icon:"none",duration:1200}),!1;if(""==this.address)return e.showToast({title:"请输入详细地址",icon:"none",duration:1200}),!1;if(!this.current_beds.sn_s_sn)return e.showToast({title:"请选择床具",icon:"none",duration:1200}),!1;var t={bed_id:this.current_beds.id,user_name:this.name,user_phone:this.phone,user_province:this.multiIds[0].name,user_city:this.multiIds[1].name,user_area:this.multiIds[2].name,user_address:this.address};console.log(t),e.showLoading({mask:!0}),d.axios.post("/api/v1/admin/beds_order",t).then((function(t){1===t.code?(n.$store.commit("admin_beds/clean_beds"),e.showToast({title:t.info,duration:1200}),setTimeout((function(){e.navigateBack()}),1200)):e.showToast({title:t.info,icon:"none",duration:1200})})).catch((function(n){e.showToast({title:"出错了",icon:"none",duration:1200})})).finally((function(){e.hideLoading()}))}}};n.default=m}).call(this,t("543d")["default"])},ad01:function(e,n,t){"use strict";var r=t("d933"),i=t.n(r);i.a},d933:function(e,n,t){}},[["334d","common/runtime","common/vendor"]]]);