(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"018c":function(t,e,o){"use strict";o.r(e);var n=o("6d8c"),i=o("c6b1");for(var s in i)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o("bfc1");var a=o("f0c5"),u=Object(a["a"])(i["default"],n["b"],n["c"],!1,null,"4de83b90",null,!1,n["a"],void 0);e["default"]=u.exports},"340a":function(t,e,o){},"6d8c":function(t,e,o){"use strict";o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return n}));var n={uImage:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-image/u-image")]).then(o.bind(null,"fcd4"))},uInput:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-input/u-input")]).then(o.bind(null,"91a8"))},uCode:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-code/u-code")]).then(o.bind(null,"32fc"))},uButton:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uview-ui/components/u-button/u-button")]).then(o.bind(null,"4005"))}},i=function(){var t=this.$createElement;this._self._c},s=[]},b422:function(t,e,o){"use strict";(function(t,e){var n=o("4ea4");o("be30");n(o("66fd"));var i=n(o("018c"));t.__webpack_require_UNI_MP_PLUGIN__=o,e(i.default)}).call(this,o("bc2e")["default"],o("543d")["createPage"])},bfc1:function(t,e,o){"use strict";var n=o("340a"),i=o.n(n);i.a},c4a7:function(t,e,o){"use strict";(function(t){var n=o("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("9523")),s=o("26cb"),a=o("db75");function u(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}var c={data:function(){return{agree:!1,show_d:!1,phone:"",sms_code:"",sms_txt:"发送验证码",sms_disabled:!1,MoMsgWait:60,sending:!1,tips:"",temp_token:""}},computed:function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?u(Object(o),!0).forEach((function(e){(0,i.default)(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):u(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({},(0,s.mapState)({app_logo:function(t){return t.global.app_logo}})),methods:{showAgreeToast:function(){t.$u.toast("请勾选协议")},change:function(t){console.log("change",t)},codeChange:function(t){this.tips=t},showDynamic:function(){this.agree?this.show_d=!0:this.showAgreeToast()},switch2Change:function(t){this.agree=t.detail.value},sendSmsCode:function(){var e=this;if(this.$refs.uCode.canGetCode){if(!this.phone)return void t.$u.toast("请输入手机号");if(!/^1[3456789]\d{9}$/.test(this.phone))return void t.$u.toast("手机号不正确");t.showLoading({title:"正在获取验证码"}),a.axios.post("/api/v1/sms_code",{phone:this.phone}).then((function(o){t.hideLoading(),1===o.code&&(t.$u.toast("验证码已发送"),e.$refs.uCode.start())})).catch((function(e){t.hideLoading(),t.$u.toast("出错了，请稍后再试")}))}},sendSbinms:function(){t.$u.toast("验证码已发送"),this.sms_txt=this.MoMsgWait+"  s",this.MoMsgWait=this.MoMsgWait-1,this.sms_disabled=!0;var e=setInterval(function(){this.sms_txt=this.MoMsgWait+"  s",this.MoMsgWait=this.MoMsgWait-1,this.sms_disabled=!0,this.MoMsgWait<0&&(clearInterval(e),this.sms_txt="重新获取",this.MoMsgWait=60,this.sms_disabled=!1)}.bind(this),1e3)},dynamicLogin:function(){var e=this;if("获取验证码"!=this.tips)if(this.phone){/^1[3456789]\d{9}$/.test(this.phone)?this.sms_code?(t.showLoading({title:"登陆中"}),a.axios.post("/api/v2/login",{phone:this.phone,code:this.sms_code,pid:t.getStorageSync("pid")}).then((function(o){t.hideLoading(),1==o.code?(e.$store.commit("user/update_user",o.data),a.axios.get("/api/v1/user/goods/cart_num").then((function(t){1===t.code&&e.$store.dispatch("goods_cart/update_goods_cart_number_badge",{number:t.data})})).catch((function(t){console.log(t)})),t.showToast({title:"登陆成功",icon:"success",duration:1400}),setTimeout((function(){t.navigateBack()}),1500)):t.$u.toast(o.info)})).catch((function(e){t.hideLoading(),t.$u.toast("网络错误，请稍后再试！")}))):t.$u.toast("请输入验证码"):t.$u.toast("手机号不正确")}else t.$u.toast("请输入手机号");else t.$u.toast("请先获取验证码")},getPhoneNumber:function(e){var o=this;console.log(e),e.detail.code?(t.showLoading({title:"登陆中"}),a.axios.post("/api/v2/wx_login",{code:e.detail.code,pid:t.getStorageSync("pid")}).then((function(e){t.hideLoading(),1==e.code?(o.$store.commit("user/update_user",e.data),a.axios.get("/api/v1/user/goods/cart_num").then((function(t){1===t.code&&o.$store.dispatch("goods_cart/update_goods_cart_number_badge",{number:t.data})})).catch((function(t){console.log(t)})),t.showToast({title:"登陆成功",icon:"success",duration:1400}),setTimeout((function(){t.navigateBack()}),1500)):setTimeout((function(){t.$u.toast(e.info)}),300)})).catch((function(e){t.hideLoading(),setTimeout((function(){t.$u.toast("网络错误，请稍后再试！")}),300)}))):t.$u.toast("授权失败")}},onLoad:function(){console.log("login.vue onLoad")}};e.default=c}).call(this,o("543d")["default"])},c6b1:function(t,e,o){"use strict";o.r(e);var n=o("c4a7"),i=o.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){o.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a}},[["b422","common/runtime","common/vendor"]]]);